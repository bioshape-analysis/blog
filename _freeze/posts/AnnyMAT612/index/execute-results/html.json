{
  "hash": "58d9dc157be500d51da4c986fc2017cf",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Farm Shape Analysis: Linking Geometry with Crop Yield and Diversity\"\njupyter: python3\n\nauthor:\n  - name: \"Mo Wang\"\n\ndate: \"October 24, 2024\"\ncategories: [landscape-analysis, agriculture]\n\ncallout-icon: false\nformat:\n  html:\n    mathjax: true\n    code-fold: true\n# bibliography: bibliography.bib\n\nexecute:\n  eval: true\n  echo: true\n  freeze: auto\n  warning: false\n---\n\n\n\n## Introduction\n\nIn farm management, the geometric characteristics of a field can influence both productivity and biodiversity. This blog will explore the relationship between field polygons and crop yield and crop diversity through three key shape analysis concepts: Shape Index, Convexity/Concavity, and Aspect Ratio. We will also demonstrate the practical application of these metrics using data from Litefarm.\n\n![farm polygon](polygon.png)\n\n## Preliminaries\n\n### 1. **Shape Index**\nThe **Shape Index** measures the complexity or irregularity of a polygon compared to a regular shape, like a circle. A Shape Index close to 1 indicates a regular, compact shape, while higher values suggest more irregular shapes.\n\n- **Formula**: \n$$\n\\text{Shape Index} = \\frac{P}{2\\sqrt{\\pi A}}\n$$\n  Where $P$ is the perimeter and $A$ is the area.\n\n### 2. **Convexity/Concavity**\n**Convexity** measures how \"convex\" or \"concave\" a polygon is. A polygon is convex if all interior angles are less than 180 degrees, meaning no part of the shape curves inward. Concave shapes, on the other hand, have inward curves and may represent natural formations or inefficient land use.\n\n### 3. **Aspect Ratio**\nThe **Aspect Ratio** assesses the proportion between the width and height of a polygon. It offers a perspective on whether the field is more elongated or more compact.\n\n\n\n## **Application of Shape Analysis Using Litefarm Data**\n\nIn this section, we will apply the above shape complexity metrics—**Shape Index**, **Convexity/Concavity**, and **Aspect Ratio**—to real-world farm data from **Litefarm**. By doing so, we can analyze how field shapes correlate with crop yield and diversity, and identify potential inefficiencies in farm layout.\n\n### **Calculating Perimeter and Area of a Farm Polygon**\n\nWhen analyzing the shape of a farm, calculating the **perimeter** and **area** of each field is essential for understanding the geometry of the land. Depending on the longitude and latitude of the farm, these calculations can be done using **geodesic distance** to account for the Earth's curvature.\n\n::: {#cc371e1d .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\n\n\ndata = pd.read_csv('/Users/app/Desktop/UBC/MAT612/blog/posts/AnnyMAT612/A_and_P.csv')\n\nprint(data.head())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   farm_id  calculated_perimeter_m  calculated_area_ha  total area in ha\n0        1            20216.371080          235.092278          396.0000\n1        2              226.133942            0.137322            0.3184\n2        3            12283.354790          249.707753          436.0000\n3        4             7994.366515           36.713865           71.0000\n4        5             1157.359844            0.819244            1.8887\n```\n:::\n:::\n\n\n### **Shape Index Calculation**\nUsing the Litefarm data, we calculate the **Shape Index** for each polygon. This will allow us to identify which fields are more regular and which are highly irregular, helping us understand the impact of field shape on crop yield.\n\n::: {#27e66a19 .cell execution_count=2}\n``` {.python .cell-code}\nimport pandas as pd\n\n\ndata = pd.read_csv('/Users/app/Desktop/UBC/landscape-analysis/data/processed/landscape_analysis_shape-index.csv')\n\nprint(data.head())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   farmID   country_name  scale   type  Shape Index\n0       0          Japan  Other  field     1.014210\n1       1         Canada  Other  field     1.022901\n2       2         Canada  Other  field     1.006712\n3       3  United States  Other  field     0.574084\n4       5          Spain  Other  field     1.124204\n```\n:::\n:::\n\n\n- A **low perimeter-area ratio** suggests that the field is compact and well-utilized.\n\n- A **high perimeter-area ratio** might indicate an irregular or elongated shape, potentially affecting farming efficiency and resource use.\n\n  \n- **Application to Crop Diversity**\n\nIrregularly shaped fields may be better suited to growing certain types of crops, while regular fields may support monocropping more effectively.\n\nConcave polygons can support more diverse cropping systems by incorporating natural features such as rivers or hills to create environments suitable for different crops.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}